try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1357e603-5639-4e4e-954d-c7caa246fa70",e._sentryDebugIdIdentifier="sentry-dbid-1357e603-5639-4e4e-954d-c7caa246fa70")}catch(e){}(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2525],{7540:e=>{e.exports={coverArtSingle:"CoverArtSingle_coverArtSingle__KLcKa",scaleDownCoverArt:"CoverArtSingle_scaleDownCoverArt__xWqrS"}},16027:e=>{e.exports={container:"WatchNowUpsell_container__OLJbi",title:"WatchNowUpsell_title__NrhAJ"}},19002:e=>{e.exports={playerControlsWrapper:"PlayerControls_playerControlsWrapper__eaDbG",hasPlaybackContext:"PlayerControls_hasPlaybackContext__jaGyB",baselineWrapper:"PlayerControls_baselineWrapper__rDAnZ",progressBarWrapper:"PlayerControls_progressBarWrapper__Twz28",playButtonWrapper:"PlayerControls_playButtonWrapper__4IRvr"}},19713:e=>{e.exports={menuVideo:"OverflowMenuVideo_menuVideo__3Pq74",visible:"OverflowMenuVideo_visible__mcV_4",wider:"OverflowMenuVideo_wider__WI8Xa",menuItem:"OverflowMenuVideo_menuItem__DhfbC",copyLinkStandalone:"OverflowMenuVideo_copyLinkStandalone__86GMi",input:"OverflowMenuVideo_input__czNTY",buttonWrapper:"OverflowMenuVideo_buttonWrapper__btvsz"}},20950:e=>{e.exports={container:"EmbedVideoWidget_container__whvO5"}},27905:e=>{e.exports={upsellCard:"Upsell_upsellCard__wEcBp",closeButton:"Upsell_closeButton__qU_EZ"}},28685:e=>{e.exports={button:"MuteButton_button__0JUJF"}},31566:e=>{e.exports={backgroundWrapper:"LandingView_backgroundWrapper__fW_ZH",playButtonContainer:"LandingView_playButtonContainer__TF_2o",overlay:"LandingView_overlay__rOU7I"}},37181:e=>{e.exports={seekButton:"SkipButtons_seekButton__1Eenz",opacity:"SkipButtons_opacity__Pvpwf",seekBack:"SkipButtons_seekBack____Vi2",seekForward:"SkipButtons_seekForward__M51Hj"}},39281:e=>{e.exports={titleWithCoverArt:"Header_titleWithCoverArt__uNSen",title:"Header_title__wDAq1",textOverflow:"Header_textOverflow__hkwyG",subtitleWrapper:"Header_subtitleWrapper__BPiJk",coverArt:"Header_coverArt__sJJjh",metadataAddToLibraryWrapper:"Header_metadataAddToLibraryWrapper__MBR7X"}},39368:e=>{e.exports={videoElement:"VideoContainer_videoElement__ArqoM",wrapper:"VideoContainer_wrapper__PNn4h",hidden:"VideoContainer_hidden__GouSF"}},42725:e=>{e.exports={container:"ProgressBar_container__WbO9T",progressBarWrapper:"ProgressBar_progressBarWrapper__o_r7Q"}},44191:e=>{e.exports={widgetContainer:"EpisodeOrShowWidget_widgetContainer__pXtAi",singleGridContainer:"EpisodeOrShowWidget_singleGridContainer__PY2uT",coverArtContainer:"EpisodeOrShowWidget_coverArtContainer__65Ei9",hasPlaybackContext:"EpisodeOrShowWidget_hasPlaybackContext__adTqu",spotifyLogoContainer:"EpisodeOrShowWidget_spotifyLogoContainer__UqGD_",metadataWrapper:"EpisodeOrShowWidget_metadataWrapper__pJ9rE",preview:"EpisodeOrShowWidget_preview__a1zQY",labelsAndSubtitle:"EpisodeOrShowWidget_labelsAndSubtitle__Ke6t9"}},48647:e=>{e.exports={backgroundColorContainer:"BackgroundColorContainer_backgroundColorContainer__YZSQ7"}},53229:e=>{e.exports={container:"WatchOnSpotifyUpsell_container__eYHe4",title:"WatchOnSpotifyUpsell_title__QUpxV"}},53253:e=>{e.exports={playControlsWrapper:"PlayControls_playControlsWrapper__ShKp7",progressSection:"PlayControls_progressSection__ZARMs",controlsSection:"PlayControls_controlsSection__GM3Jv",controlArea:"PlayControls_controlArea__FKdPp",centered:"PlayControls_centered__ImfEM",rightCorner:"PlayControls_rightCorner__gK3UX",visible:"PlayControls_visible__au1fk"}},55540:e=>{e.exports={progressBarContainer:"ProgressBarVideo_progressBarContainer__3xxt0",progressBarLineActive:"ProgressBarVideo_progressBarLineActive__WTYGW",progressBarLineBackground:"ProgressBarVideo_progressBarLineBackground__VkIfT",progressBarLine:"ProgressBarVideo_progressBarLine__nmnnP",progressBarSlider:"ProgressBarVideo_progressBarSlider__dpg96",hover:"ProgressBarVideo_hover__KRZee",tooltipContainer:"ProgressBarVideo_tooltipContainer__H1fM8",tooltip:"ProgressBarVideo_tooltip__hrosb"}},59018:e=>{e.exports={playbackErrorWrapper:"VideoPlayer_playbackErrorWrapper__viFAA",wrapper:"VideoPlayer_wrapper__R3SMr",iconAnchorStyled:"VideoPlayer_iconAnchorStyled__9Xu_d"}},59743:e=>{e.exports={controlsWrapper:"Controls_controlsWrapper__Spx_i"}},59775:(e,t,a)=>{"use strict";a.d(t,{D:()=>y});var r=a(7765),n=a(46001),i=a.n(n),o=a(15977),s=a(10903),l=a(96985),d=a(43695),c=a(74303),u=a(59717),p=a(20260),m=a(10613),_=a(89133),v=a(19002),h=a.n(v);let y=()=>{let{playbackState:e}=(0,o.useContext)(l.T),t=!!e?.hasContext,{isCompactLegacy:a}=(0,s.o)();return(0,r.jsxs)("div",{className:i()(h().playerControlsWrapper,{[h().hasPlaybackContext]:t}),children:[(0,r.jsxs)("div",{className:i()(h().baselineWrapper),children:[(0,r.jsxs)("div",{className:i()(h().progressBarWrapper,{[h().hasPlaybackContext]:t}),dir:"ltr",children:[(0,r.jsx)(_.v,{}),(0,r.jsx)(p.A,{}),(0,r.jsx)(_.m,{})]}),(0,r.jsx)(m.l,{}),a&&(0,r.jsx)(d.p,{}),(0,r.jsx)(c.G,{})]}),(0,r.jsx)("div",{className:h().playButtonWrapper,children:(0,r.jsx)(u.D,{})})]})}},71171:(e,t,a)=>{"use strict";a.d(t,{L:()=>e5});var r=a(7765),n=a(46001),i=a.n(n),o=a(15977),s=a(30451),l=a(64667),d=a(68342),c=a(8233),u=a(25945),p=a(20950),m=a.n(p),_=a(96985),v=a(34930),h=a(75398),y=a(21498),b=a(96115);let x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map(e=>({...e,..."maxWidth"in e?{maxWidth:e.maxWidth,width:void 0}:{width:e.width,maxWidth:void 0}}))};var g=a(51524),f=a(48620),k=a(82645),C=a(31493),j=a(60360),w=a(36481),E=a(5198),S=a(61081),B=a(15993),N=a(19713),A=a.n(N);let W=()=>{let e=(0,s.d4)(e=>e.machineState.showOverflowMenu),t=(0,C.kj)(),a=(0,s.d4)(e=>(0,j.BT)(e)||e.data.entity?.isAudiobook?e.data.entity.relatedEntityUri:e.data.entity.uri),[n,l]=(0,o.useState)(""),[d,c]=(0,o.useState)(!1),u=t("embed.copy_link_to_share","Link for sharing","Link for sharing option text");return e?(0,r.jsx)("div",{className:i()(A().wrapper),children:(0,r.jsx)(B.N,{visible:e,onClose:()=>{c(!1)},showPolicies:!d,children:(0,r.jsx)("ul",{className:i()(A().menuVideo,{[A().wider]:d,[A().visible]:e}),children:d?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(g.E,{variant:"marginal",paddingBottom:"tighter-2",children:u}),(0,r.jsx)("li",{className:A().copyStandaloneWrapper,children:(0,r.jsx)(f.Y,{className:A().copyLinkStandalone,href:n,children:(0,r.jsx)(k.Z,{readOnly:!0,ref:e=>{e&&(l(e.value),e.focus(),e.select())},type:"text",className:A().input,defaultValue:n})})}),(0,r.jsx)("div",{className:A().buttonWrapper,children:(0,r.jsx)(E.M,{showFallbackCopy:!0})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("li",{className:i()(A().menuItem),children:(0,r.jsx)(S.y,{})}),(0,r.jsx)("li",{className:A().menuItem,children:(0,r.jsx)(w.C,{uri:a})}),(0,r.jsx)("li",{className:i()(A().menuItem),children:(0,r.jsx)(E.M,{handleStandaloneCopyItem:e=>{c(!0),l(e)}})})]})})})}):null};var M=a(97451),P=a(29946),L=a(59743),O=a.n(L),V=a(4209),T=a(62552),H=a(26121),I=a(67675),D=a(78180);let F=()=>{document.fullscreenElement&&document.exitFullscreen?document.exitFullscreen():document.mozFullScreen&&document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitIsFullScreen&&document.webkitExitFullscreen&&document.webkitExitFullscreen()},R=()=>!!(document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen),z=(0,o.createContext)(null),U=()=>{let e=(0,C.kj)(),t=(0,c.j)(),[a,n]=(0,o.useState)(!1),[i,s]=(0,o.useState)(!1);(0,o.useEffect)(()=>{n(!!(document.fullscreenEnabled||document.webkitFullscreenEnabled))},[]);let d=(0,o.useContext)(z);return(0,o.useEffect)(()=>F,[]),a&&(i?(0,r.jsx)(V.H,{onClick:()=>{s(!1),F()},semanticColor:"textBase","data-testid":"exit-fullscreen","aria-label":e("npv.exit-full-screen","Exit full screen","Accessibility label for exiting full screen mode button"),title:e("npv.exit-full-screen","Exit full screen","Accessibility label for exiting full screen mode button"),iconOnly:I.u,condensedAll:!0}):(0,r.jsx)(V.H,{onClick:()=>{s(!0),!R()&&d?.current&&((e=>{e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()})(d.current),(e=>{let t=()=>{R()||(document.removeEventListener("fullscreenchange",t),document.removeEventListener("fullscreenChange",t),document.removeEventListener("webkitfullscreenchange",t),document.removeEventListener("mozfullscreenchange",t),e())};document.addEventListener("fullscreenchange",t),document.addEventListener("fullscreenChange",t),document.addEventListener("webkitfullscreenchange",t),document.addEventListener("mozfullscreenchange",t)})(()=>s(!1))),t((0,l.d)({action_type:"click",action_intent:"toggle-full-screen"}))},semanticColor:"textBase","data-testid":"show-fullscreen","aria-label":e("npv.full-screen","Full screen","Accessibility label for switching to full screen mode button"),title:e("npv.full-screen","Full screen","Accessibility label for switching to full screen mode button"),iconOnly:D.L,condensedAll:!0}))};var G=a(90668),$=a(60823),q=a(28685),Y=a.n(q);let X=()=>{let e=(0,c.j)(),{triggerPlaybackOperation:t}=(0,o.useContext)(_.T),[a,n]=(0,o.useState)(!1),i=(0,C.kj)();return(0,r.jsx)(V.H,{onClick:()=>{t(a?(0,v.LY)():(0,v.i2)()),n(!a),e((0,l.d)({action_type:"click",action_intent:"toggle-mute"}))},"data-testid":"toggle-volume",semanticColor:"textBase",condensedAll:!0,iconLeading:a?G.X:$.C,className:Y().button,cellPadding:"12px","aria-label":a?i("playback-control.unmute","Unmute","Accessibility label for a button that mutes the volume of a track"):i("playback-control.mute","Mute","Accessibility label for a button that unmutes the volume of a track"),title:a?i("playback-control.unmute","Unmute","Accessibility label for a button that mutes the volume of a track"):i("playback-control.mute","Mute","Accessibility label for a button that unmutes the volume of a track")})};var K=a(59717),Z=a(53253),J=a.n(Z),Q=a(93512),ee=a(42725),et=a.n(ee),ea=a(96435),er=a(62193),en=a(55540),ei=a.n(en);let eo=(e,t)=>{let a=e.current?.getBoundingClientRect();if(!a)return 0;let r=a.right-a.left;return Math.max(0,Math.min(1,(t-a.left)/r))},es=(e,t)=>Math.max(0,Math.min(1,(e??0)/(t||1))),el=(e,t,a,r)=>{let n=e.current?.getBoundingClientRect();if(!n)return!1;let i=12/(n.right-n.left);return Math.abs(es(a,r)-t)<=i},ed=e=>{let{isDragging:t,onDragging:a,max:n,current:s}=e,[l,d]=(0,o.useState)({id:0,isHovering:!1,isHoveringSlider:!1,hoverPercentage:0}),c=(0,o.useRef)(null),u=(e=>function(t){let a,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;return function(){for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];a=o,n||(r||e.apply(e,o),n=!0,window.setTimeout(()=>{n=!1,r&&e.apply(e,a)},t))}})(e=>{let{pageX:t}=e,a=eo(c,t);d(e=>({...e,hoverPercentage:a,isHoveringSlider:el(c,a,s,n)}))})(50),p=(0,o.useCallback)(e=>{let t,a;if(e?.type.includes("touch")){let r=void 0===e.originalEvent?e:e.originalEvent,n=r.touches[0]||r.changedTouches[0];t=n.pageX,a=n.pageY}else t=e.pageX,a=e.pageY;return[t,a]},[]),m=(0,o.useCallback)(e=>{if(/^mouse(down|move)$/i.test(e.type)&&0===e.button||"touchmove"===e.type){let[t]=p(e),r=eo(c,t);u({pageX:t}),a&&a({percentage:r,id:l.id,ended:!1})}},[p,a,l.id,u]),_=()=>{d(e=>({...e,isHovering:!1,isHoveringSlider:!1,id:Date.now()}))},v=(0,o.useCallback)(e=>{let[t]=p(e),r=eo(c,t);a&&a({percentage:r,id:l.id,ended:!0})},[p,a,l.id]);(0,o.useEffect)(()=>(t?(["mousemove","touchmove"].forEach(e=>document.addEventListener(e,m)),["mouseup","touchend"].forEach(e=>document.addEventListener(e,v))):(["mousemove","touchmove"].forEach(e=>document.removeEventListener(e,m)),["mouseup","touchend"].forEach(e=>document.removeEventListener(e,v))),()=>{["mousemove","touchmove"].forEach(e=>document.removeEventListener(e,m)),["mouseup","touchend"].forEach(e=>document.removeEventListener(e,v))}),[t,v,m]);let h={left:`${(l.isHovering?l.hoverPercentage:0)*100}%`},y={transform:`translateX(-${100-(l.isHovering?l.hoverPercentage:0)*100}%)`},b=es(s,n),x=l.isHovering&&n?n*l.hoverPercentage:0,f=l.isHovering&&void 0!==n&&n>0,k={transform:`translateX(-${100-100*b}%)`},C={left:`${100*b}%`};return(0,r.jsxs)("div",{"aria-label":"Progress Bar",role:"progressbar","aria-valuenow":100*b,tabIndex:0,ref:c,onMouseDown:m,onMouseEnter:e=>{let[t]=p(e),a=eo(c,t);d(e=>({...e,isHovering:!0,isHoveringSlider:el(c,a,s,n),id:Date.now()}))},onMouseMove:e=>{let[t]=p(e);u({pageX:t})},onMouseLeave:_,onTouchStart:()=>{d(e=>({...e,isHovering:!0,id:Date.now()}))},onTouchMove:m,onTouchEnd:_,className:ei().progressBarContainer,children:[f&&(0,r.jsx)("div",{className:i()(ei().tooltipContainer,{[ei().hover]:l.isHoveringSlider||t}),style:h,children:(0,r.jsx)(ea.m,{className:ei().tooltip,children:(0,r.jsx)(g.E,{variant:"marginal",children:(0,er.A)(x)})})}),(0,r.jsxs)("div",{className:ei().progressBarLineBackground,children:[(0,r.jsx)("div",{className:ei().progressBarLineActive,style:y}),(0,r.jsx)("div",{"data-testid":"progress-bar-line",id:"progress-bar-line",style:k,className:ei().progressBarLine})]}),(0,r.jsx)("div",{"data-testid":"progress-bar-slider",id:"progress-bar-slider",className:i()(ei().progressBarSlider,{[ei().hover]:l.isHoveringSlider||t}),style:C})]})},ec=e=>{let{duration:t,currentDuration:a,onSeek:n}=e,[i,s]=(0,o.useState)(!1),[d,u]=(0,o.useState)(),p=Number.isFinite(d)&&null!==d?(d||0)*t:a,m=(0,Q.YQ)(()=>{u(void 0)},1e3),_=(0,c.j)(),v=(0,o.useCallback)(e=>{let{percentage:a,ended:r}=e;s(!0),u(a),r&&(n((a||0)*t),s(!1),u(a),_((0,l.d)({action_type:"click",action_intent:"seek-click"})),m())},[s,u,n,_,m,t]);return(0,r.jsx)("div",{className:et().container,"data-testid":"video-progress-bar",children:(0,r.jsx)("div",{className:et().progressBarWrapper,children:(0,r.jsx)(ed,{max:t,current:p,onDragging:v,isDragging:i})})})};var eu=a(81536);let ep=()=>{let e=(0,C.kj)()("embed-video.controls.replay","Replay","Accessibility label for replay button"),t=(0,c.j)(),{triggerPlaybackOperation:a}=(0,o.useContext)(_.T);return(0,r.jsx)(V.H,{onClick:()=>{a((0,v.ZH)(b.Xr.VIDEO)),t((0,l.d)({action_type:"click",action_intent:"play",action_item_id:"replay-view"}))},"arial-label":e,iconOnly:eu.H,semanticColor:"textBase",condensed:!0,"data-testid":"replay-btn"})},em=e=>e<10?`0${e}`:`${e}`,e_=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[Math.floor(e/36e5%60),e<6e4&&!t?Math.ceil(e/6e4%60):Math.floor(e/6e4%60),Math.floor(e/1e3%60)]},ev=(e,t,a)=>e?[em(e),em(t),em(a)].join(":"):[em(t),em(a)].join(":"),eh=o.memo(e=>{let{duration:t,position:a}=e,[n,i,s]=e_(a||0,!0),l=ev(n,i,s),d=o.useMemo(()=>ev(...e_(t,!0)),[t]),[c]=(0,Q.d7)(l,500),[u]=(0,Q.d7)(d,500);return(0,r.jsxs)(g.E,{semanticColor:"textBase",variant:"bodySmall","data-testid":"timestamp",title:`${c} / ${u}`,children:[l," / ",d]})}),ey=e=>{let{duration:t,position:a,onShowMoreClick:n}=e,l=(0,s.d4)(e=>e.settings.isIOS),d=(0,C.kj)(),{triggerPlaybackOperation:c}=(0,o.useContext)(_.T),u=!!(null!==a&&a>=t),p=d("embed_more","More","Accessibility label for an open context menu button"),[m,h]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{setInterval(()=>{h(!0)},0)},[h]),(0,r.jsxs)("div",{className:i()(J().playControlsWrapper,{[J().visible]:m}),"data-testid":"play-controls",children:[(0,r.jsx)("div",{className:J().progressSection,children:(0,r.jsx)(ec,{onSeek:e=>{c((0,v.jF)(e))},duration:t,currentDuration:a})}),(0,r.jsxs)("div",{className:J().controlsSection,"data-testid":"controls-area-v2",children:[(0,r.jsxs)("div",{className:i()(J().controlArea,J().leftCorner),children:[u?(0,r.jsx)(ep,{}):(0,r.jsx)(K.D,{maxTimeToNotShowLoading:500}),(0,r.jsx)(eh,{duration:t,position:a})]}),(0,r.jsxs)("div",{className:i()(J().controlArea,J().rightCorner),children:[(0,r.jsx)(X,{}),(0,r.jsx)(U,{}),(0,r.jsx)(V.H,{size:"medium",semanticColor:"textBase",title:p,"aria-label":p,onClick:n,iconOnly:l?T.x:H.g,className:J().overflowMenuButton,condensedAll:!0})]})]})]})},eb=e=>{let{onShowMoreClick:t,duration:a}=e,{playbackState:n,triggerPlaybackOperation:i}=(0,o.useContext)(_.T),s=(0,P.s)(n)??null,l=n?.isPaused??!0,d=n?.hasContext,u=(0,c.j)();return(0,o.useEffect)(()=>{d&&s&&s>=a&&void 0!==l&&i((0,v.v7)())},[s,a,l,u,d,i]),(0,r.jsx)("div",{className:O().controlsWrapper,"data-testid":"controls-container",children:(0,r.jsx)(ey,{onShowMoreClick:t,duration:a,position:s})})};var ex=a(47428),eg=a(14597),ef=a(77005),ek=a(70777),eC=a(43695),ej=a(68710),ew=a(39281),eE=a.n(ew);let eS=()=>{let e=(0,s.d4)(e=>e.data.entity?.name),t=(0,s.d4)(e=>e.data.entity),a=(0,s.d4)(e=>e.data.entity?.subtitle),n=t?.relatedEntityCoverArt,i=(0,s.d4)(e=>e.data.entity?.isExplicit),d=(0,eg.aG)({productName:"embed_player_v"}),u=(0,o.useMemo)(()=>[...x(n)??[]].sort((e,t)=>e.maxWidth?(e.maxWidth||0)-(t.maxWidth||0):(e.width||0)-(t.width||0)),[n]),p=(0,c.j)(),{width:m}=o.useContext(ef.k),_=m&&m>ek.OM.mediumVideo;return(0,r.jsxs)("div",{className:eE().titleWithCoverArt,children:[u?.[0]?.url&&(0,r.jsx)(ex._,{className:eE().coverArt,src:u[0]?.url,borderRadius:"base",alt:`${a} cover`}),(0,r.jsxs)("div",{className:eE().metadataAddToLibraryWrapper,children:[(0,r.jsxs)("div",{className:eE().title,children:[(0,r.jsx)(g.E,{className:eE().textOverflow,as:"a",variant:(e=>e?e>ek.OM.mediumVideo?"titleSmall":e>ek.OM.smallVideo?"bodyMediumBold":"bodySmallBold":"bodyMediumBold")(m),"data-testid":"header-title",href:d.selectedEntity,onClick:()=>void p((0,l.d)({action_type:"click",action_intent:"deeplink",action_item_id:"title"})),children:e}),(0,r.jsxs)("div",{className:eE().subtitleWrapper,children:[i&&(0,r.jsx)(ej.f,{bold:!0}),(0,r.jsx)(g.E,{className:eE().textOverflow,"data-testid":"header-subtitle",as:"a",variant:_?"bodyMedium":"bodySmall",href:d.compositeEntity,onClick:()=>void p((0,l.d)({action_type:"click",action_intent:"deeplink",action_item_id:"subtitle"})),semanticColor:"textSubdued",children:a})]})]}),(0,r.jsx)(eC.p,{})]})]})};var eB=a(7591),eN=a(50837),eA=a(31566),eW=a.n(eA);let eM=e=>{let{backgroundImage:t,onPlay:a}=e,[n,i]=(0,o.useState)(!1),s=(0,C.kj)(),{width:l}=o.useContext(ef.k),[d,c]=(0,o.useState)("medium");return(0,o.useEffect)(()=>{l&&(l>ek.OM.mediumVideo?c("xlarge"):l<=ek.OM.smallVideo?c("medium"):c("large"))},[l]),(0,r.jsx)("div",{role:"button",tabIndex:0,className:eW().backgroundWrapper,style:{"--background-image":`url(${t})`},onClick:()=>{n||(i(!0),a())},onKeyDown:e=>{n||"Enter"!==e.key&&" "!==e.key||(i(!0),a(),e.stopPropagation())},"aria-label":s("embed_play","Play","Accessibility label for a button that plays preview of a track"),children:(0,r.jsx)("div",{className:eW().overlay,children:n?(0,r.jsx)(eB.U,{"data-testid":"progress-dots"}):(0,r.jsx)("div",{className:eW().playButtonContainer,"data-testid":"landing-view-play-button",children:(0,r.jsx)(eN.A,{size:d,semanticColor:"decorativeSubdued"})})})})};var eP=a(91381),eL=a(86727),eO=a(1169),eV=a(70920),eT=a(96463),eH=a.n(eT);let eI=e=>{let{playbackError:t}=e,a=(0,c.j)(),n=(0,eg.aG)({productName:"embed_player_v"}),i=(0,C.kj)();return(0,o.useEffect)(()=>{t&&a((0,l.d)({action_type:"playback",action_intent:"video-not-available"})),(0,eV.fE)({metric_type:eL.MetricTypes.COUNTER,what:"embed_video_playback_error",tags:{message:t?.message??"unknown"},value:1})},[a,t]),(0,r.jsxs)("div",{className:eH().wrapper,"data-testid":"error-container",children:[(0,r.jsx)(g.E,{variant:"bodyMedium",paddingBottom:"base",children:i("embed-video.video-not-available","This video is unavailable","Error message when video is not available")}),(0,r.jsx)(eP.$,{onClick:()=>{a((0,h.kD)("embed_player_v")),a((0,l.d)({action_type:"click",action_intent:"open-spotify",action_item_id:"error-page"}))},href:n?.embeddedEntity||eO.G,size:"medium",children:(0,r.jsx)(g.E,{variant:"bodyMediumBold",children:i("embed.open-spotify","Open Spotify","Button to deeplink to Spotify app")})})]})};var eD=a(55709),eF=a(27905),eR=a.n(eF),ez=a(16027),eU=a.n(ez);let eG=()=>{let e=(0,c.j)(),t=(0,eg.aG)({productName:"embed_player_v"}),[a,n]=e_((0,s.d4)(e=>{let{data:t}=e;return t.entity?.duration??0})),{width:i}=(0,o.useContext)(ef.k),d=function(e){return!e||e<=ek.OM.smallVideo?"marginalBold":e<=ek.OM.mediumVideo?"bodySmallBold":"bodyMediumBold"}(i),u=(0,C.kj)();return(0,o.useEffect)(()=>{e((0,l.d)({action_type:"view",action_intent:"open-upsell",action_item_id:"watch-now-upsell"}))},[e]),(0,r.jsxs)("div",{className:eU().container,children:[(0,r.jsx)(g.E,{id:"dialogDescription",className:eU().title,variant:d,children:a?u("embed-video.upsell.whatch-long-episode","Watch the full {hours} hr {minutes} min episode on Spotify for free","Text displayed on a long video upsell after a user paused the video.",{hours:a.toString(),minutes:n.toString()}):u("embed-video.upsell.watch-episode","Watch the full {minutes} min episode on Spotify for free","Text displayed on a short video upsell after a user paused the video.",{minutes:n.toString()})}),(0,r.jsx)(eP.$,{id:"dialogTitle",size:"small",href:t.cta?t.cta:void 0,onClick:()=>{e((0,l.d)({action_type:"click",action_intent:"deeplink",action_item_id:"get-spotify"}))},children:u("embed-video.upsell.watch-now","Watch now","Text on a video`s upsell button that calls to action to continue watching on Spotify.")})]})};var e$=a(53229),eq=a.n(e$);let eY=()=>{let e=(0,c.j)(),t=(0,eg.aG)({productName:"embed_player_v",intent:eg.pg.ADD_TO_LIBRARY}),{width:a}=(0,o.useContext)(ef.k),n=function(e){return!e||e<=ek.OM.smallVideo?"marginalBold":e<=ek.OM.mediumVideo?"bodySmallBold":"bodyMediumBold"}(a),i=(0,C.kj)();return(0,o.useEffect)(()=>{e((0,l.d)({action_type:"view",action_intent:"open-upsell",action_item_id:"watch-later-upsell"}))},[e]),(0,r.jsxs)("div",{className:eq().container,children:[(0,r.jsx)(g.E,{id:"dialogDescription",className:eq().title,variant:n,children:i("embed-video.upsell.watch-on-spotify.title","Want to save your place and come back later?","Instruct to save content for watching later on the Spotify app")}),(0,r.jsx)(eP.$,{id:"dialogTitle",size:"small",href:t.selectedEntity?t.selectedEntity:void 0,onClick:()=>{e((0,l.d)({action_type:"click",action_intent:"deeplink",action_item_id:"save-on-spotify-watch-later-upsell"}))},children:i("watch_on_spotify","Watch on Spotify","Button to watch content on Spotify")})]})},eX=()=>{let[e,t]=(0,o.useState)(!1),[a,n]=(0,o.useState)(0),{playbackState:i}=(0,o.useContext)(_.T),{width:l}=(0,o.useContext)(ef.k),d=(0,C.kj)(),c=!!i?.isPaused,u=!!i?.hasContext,p=i?.duration??0,m=(0,s.d4)(e=>{let{machineState:t}=e;return t.playbackMode}),v=(0,P.s)(i),h=u&&c&&v||v===p,b=(0,o.useRef)(null);(0,o.useEffect)(()=>{t(!1),b.current?.focus()},[h]);let x=(0,o.useCallback)(()=>{t(!0)},[]);return((0,o.useEffect)(()=>{let e=e=>{"Escape"===e.key&&t(!0)};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[]),(0,o.useEffect)(()=>{h&&n(e=>e+1)},[h]),!h||e||a>1)?null:(0,r.jsxs)("div",{role:"dialog","aria-labelledby":"dialogTitle","aria-describedby":"dialogDescription",className:eR().upsellCard,ref:b,tabIndex:-1,children:[m===y.L.PREVIEW?(0,r.jsx)(eG,{}):(0,r.jsx)(eY,{}),(0,r.jsx)("div",{className:eR().closeButton,children:(0,r.jsx)(V.H,{semanticColor:"textBase",onClick:x,condensedAll:!0,size:l&&l<=ek.OM.smallVideo?"small":"medium","aria-label":d("close_button_action","Close","Accessibility label for a close button"),title:d("close_button_action","Close","Accessibility label for a close button"),iconOnly:eD.M})})]})};var eK=a(39368),eZ=a.n(eK);let eJ=e=>{let{disabled:t=!1,children:a,isHideChildrenAllowed:n,isPaused:l,overlayRef:d}=e,[c,u]=(0,o.useState)(!0),{playbackState:p,triggerPlaybackOperation:m}=(0,o.useContext)(_.T),h=(0,o.useRef)(null),y=(0,s.d4)(e=>{let{machineState:t}=e;return t.initialized}),b=(0,s.d4)(e=>{let{data:t}=e;return Number(t.entity?.duration)}),x=(0,o.useCallback)(()=>{n&&!l&&u(!1)},[l,n]),g=(0,Q.YQ)(x,3e3);(0,o.useEffect)(()=>{!n&&l&&u(!0)},[n,l]);let f=(0,Q.YQ)(g,100,{maxWait:1e3,leading:!0,trailing:!1}),k=p?.positionAsOfTimestamp;return(0,o.useEffect)(()=>{l&&u(!0)},[l]),(0,o.useEffect)(()=>{let e=e=>{g(),e.target instanceof HTMLButtonElement||e.target instanceof HTMLAnchorElement||("Enter"!==e.key&&"Tab"!==e.key||c||u(!0)," "===e.key&&m((0,v.d5)()),"ArrowLeft"===e.key&&(c||u(!0),m((0,v.A4)())),"ArrowRight"===e.key&&(c||u(!0),m((0,v.q3)())))};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[m,c,g]),(0,r.jsx)(z.Provider,{value:h,children:(0,r.jsx)("div",{className:i()("VideoPlayer__container",eZ().videoElement),"data-testid":`initialized-${y}`,onClick:e=>{let a=e.target===d?.current;n&&!t&&(c?(!k||k<b&&a)&&m((0,v.d5)()):(u(!0),g()))},onMouseEnter:()=>{u(!0)},onMouseMove:f,onMouseLeave:()=>{n&&!l&&u(!1)},onTouchMove:f,ref:h,children:(0,r.jsx)("div",{"data-testid":"video-wrapper",className:i()(eZ().wrapper,{[eZ().hidden]:!c}),style:{visibility:`${c?"visible":"hidden"}`},children:a})})})};var eQ=a(59018),e0=a.n(eQ);let e1=()=>{let e=(0,s.d4)(e=>e.machineState.showOverflowMenu),[t,a]=(0,o.useState)(!0),[n,d]=(0,o.useState)(!1),u=(0,o.useRef)(null),p=(0,s.d4)(e=>{let{data:t}=e;return t.entity}),{playbackState:m,triggerPlaybackOperation:g}=(0,o.useContext)(_.T),f=m?.isPaused,k=m?.isBuffering,C=m?.hasContext,j=!!m?.error,w=m?.error,E=m?.duration??0,S=(0,s.d4)(e=>{let{machineState:t}=e;return t.playbackMode})===y.L.PREVIEW,B=(0,s.d4)(e=>{let{data:t}=e;return t.entity?.duration??0}),N=(0,c.j)();t&&C&&!1===k&&a(!1),(0,o.useEffect)(()=>{d(!t&&!0===C&&!e&&!/alwaysVisible=1/.test(document.location.search))},[t,f,C,e]);let A=p?.visualIdentity?.image?.length?p.visualIdentity.image:p?.coverArt?.sources,P=x(p?.videoThumbnailImage||A),L=(0,o.useMemo)(()=>[...P??[]].sort((e,t)=>e.maxWidth?(t.maxWidth||0)-(e.maxWidth||0):(t.width||0)-(e.width||0)),[P]);return(0,r.jsx)(eJ,{disabled:!C,isHideChildrenAllowed:n,isPaused:!!f,overlayRef:u,children:j?(0,r.jsx)("div",{className:e0().playbackErrorWrapper,children:(0,r.jsx)(eI,{playbackError:w})}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eS,{}),(0,r.jsx)(W,{}),(0,r.jsx)(M.A,{className:i()(e0().iconAnchorStyled),isVideoEntity:!0}),t?(0,r.jsx)(eM,{onPlay:()=>{N((0,l.d)({action_type:"click",action_intent:"play",action_item_id:"landing-view"})),g((0,v.ZH)(b.Xr.VIDEO))},backgroundImage:L?.[0]?.url}):(0,r.jsxs)("div",{className:i()(e0().wrapper),"data-testid":"overlay-wrapper",ref:u,children:[(0,r.jsx)(eX,{}),(0,r.jsx)(eb,{onShowMoreClick:()=>{N((0,h.v7)()),N((0,l.d)({action_type:"click",action_intent:"open-context-menu"}))},duration:S?E:B})]})]})})},e5=()=>{let e=(0,o.useCallback)(()=>"ontouchstart"in document.documentElement?"touchstart":"mouseover",[]),t=(0,c.j)(),a=(0,s.d4)(e=>e.data.entity?.visualIdentity),n=(0,s.d4)(e=>e.settings.isDarkMode)?void 0:(0,u.H)(a),p=(0,o.useCallback)(()=>{document.removeEventListener(e(),p),t((0,d.n)()),t((0,l.d)({action_type:"interacted",action_intent:e()}))},[t,e]);return(0,o.useEffect)(()=>(t((0,d.P)()),document.addEventListener(e(),p),()=>{document.removeEventListener(e(),p)}),[t,p,e]),(0,r.jsx)("div",{className:i()("encore-dark-theme","encore-layout-themes",m().container),"data-testid":"video-embed",style:n,children:(0,r.jsx)(e1,{})})}},83338:(e,t,a)=>{"use strict";a.d(t,{R:()=>m});var r=a(7765),n=a(46001),i=a.n(n),o=a(15977),s=a(96985),l=a(77005),d=a(70777),c=a(52348),u=a(7540),p=a.n(u);let m=e=>{let{isPreview:t,hasPlaybackContext:a,onClick:n}=e,[u,m]=(0,o.useState)(!1),{width:_,height:v}=(0,o.useContext)(l.k),h=(0,o.useRef)(null),{playbackState:y}=(0,o.useContext)(s.T),b=y?.isPaused;return(0,o.useEffect)(()=>(_&&v&&_>=d.OM.medium&&v>=d.ht.large&&!t&&a?h.current=setTimeout(()=>m(!0),200):m(!1),()=>{h.current&&clearTimeout(h.current)}),[t,b,h,_,v,a]),(0,r.jsx)(c.e,{className:i()(p().coverArtSingle,{[p().scaleDownCoverArt]:u}),onClick:n})}},86103:(e,t,a)=>{"use strict";a.d(t,{W:()=>E});var r=a(7765),n=a(46001),i=a.n(n),o=a(15977),s=a(30451),l=a(55236),d=a(96985),c=a(34930),u=a(21498),p=a(25945),m=a(10620),_=a(88307),v=a(83338),h=a(84787),y=a(59775),b=a(20456),x=a(97451),g=a(7587),f=a(29043),k=a(22010),C=a(28850),j=a(44191),w=a.n(j);let E=()=>{(0,l.n)();let e=(0,s.d4)(e=>e.machineState.initialized),t=(0,s.d4)(e=>e.machineState.playbackMode),{playbackState:a,triggerPlaybackOperation:n}=(0,o.useContext)(d.T),j=!!a?.hasContext,E=a?.isPaused,S=t===u.L.PREVIEW,B=j&&!S,N=(0,s.d4)(e=>e.data.entity?.visualIdentity),A=(0,s.d4)(e=>e.settings.isDarkMode)?void 0:(0,p.H)(N),W=(0,s.d4)(e=>e.data.entity?.uri);return W?(0,r.jsxs)("div",{"data-testid":"embed-widget-container",className:i()("encore-dark-theme","encore-layout-themes",w().widgetContainer),style:A,children:[(0,r.jsx)(_.n,{}),(0,r.jsxs)("div",{"data-testid":`initialized-${e}`,className:i()(w().singleGridContainer,{[w().hasPlaybackContext]:B}),children:[(0,r.jsx)("div",{className:i()(w().coverArtContainer,{[w().hasPlaybackContext]:B}),children:(0,r.jsx)(v.R,{isPreview:S,hasPlaybackContext:j,onClick:()=>{void 0!==E&&n((0,c.v7)())}})}),(0,r.jsx)("div",{className:w().spotifyLogoContainer,children:(0,r.jsx)(x.A,{})}),(0,r.jsxs)("div",{className:i()(w().metadataWrapper,{[w().hasPlaybackContext]:B,[w().preview]:S}),children:[(0,r.jsx)(k.h,{}),(0,r.jsxs)("span",{className:i()(w().labelsAndSubtitle,{[w().preview]:S}),children:[(0,r.jsx)(g.Y,{}),(0,r.jsx)(f.P,{})]}),(0,r.jsx)(m.C,{uri:W})]}),t!==u.L.UNKNOWN&&(S?(0,r.jsx)(b.l,{}):(0,r.jsx)(y.D,{}))]}),t!==u.L.UNKNOWN&&(0,r.jsx)(h.o,{}),t!==u.L.UNKNOWN&&(0,r.jsx)(C.a,{})]}):null}},88307:(e,t,a)=>{"use strict";a.d(t,{n:()=>o});var r=a(7765);a(15977);var n=a(48647),i=a.n(n);let o=()=>(0,r.jsx)("div",{className:i().backgroundColorContainer})},89133:(e,t,a)=>{"use strict";a.d(t,{m:()=>f,v:()=>g});var r=a(7765),n=a(4209),i=a(16539),o=a(59461),s=a(73553),l=a(47235),d=a(31493),c=a(46001),u=a.n(c),p=a(15977),m=a(30451),_=a(96985),v=a(34930),h=a(64667),y=a(8233),b=a(37181),x=a.n(b);let g=()=>{let e=(0,m.d4)(e=>e.data.entity),{playbackState:t,triggerPlaybackOperation:a}=(0,p.useContext)(_.T),s=!!e.trackList,l=t?.item?.uri,c=(0,m.d4)(e=>e.settings.isVideoEmbed),b=(0,y.j)(),g=(0,d.kj)();return(0,r.jsx)(n.H,{size:c?"medium":"small",className:u()(x().seekButton,x().seekBack,{[x().opacity]:!c}),semanticColor:"textBase",disabled:!t?.restrictions?.canSeek,onClick:()=>{t?.restrictions?.canSeek&&(s?(a((0,v.mb)()),b((0,h.d)({action_type:"click",action_intent:"previous",item_uri:l}))):(a((0,v.A4)()),b((0,h.d)({action_type:"click",action_intent:"skip-back-15"}))))},iconOnly:s?i.A:o.e,"aria-label":s?g("spe.playback-control.skip-back","Previous","Accessibility label for a button that skips to the previous track in a playlist"):g("spe.playback-control.skip-backward-15","Skip back 15 seconds","Accessibility label for a button that skips to the previous 15 sec of a track"),condensedAll:!0})},f=()=>{let e=(0,m.d4)(e=>e.data.entity),t=(0,m.d4)(e=>e.settings.isVideoEmbed),{playbackState:a,triggerPlaybackOperation:i}=(0,p.useContext)(_.T),o=!!e.trackList,c=a?.item?.uri,b=(0,y.j)(),g=(0,d.kj)();return(0,r.jsx)(n.H,{size:t?"medium":"small",className:u()(x().seekButton,x().seekForward,{[x().opacity]:!t}),semanticColor:"textBase",disabled:!a?.restrictions?.canSeek,onClick:()=>{a?.restrictions?.canSeek&&(o?(i((0,v.GT)()),b((0,h.d)({action_type:"click",action_intent:"next",item_uri:c}))):(i((0,v.q3)()),b((0,h.d)({action_type:"click",action_intent:"skip-forward-15"}))))},iconOnly:o?s.s:l.A,"data-testid":"skip-forward","aria-label":o?g("spe.playback-control.skip-forward","Next","Accessibility label for a button that skips to the next track in a playlist"):g("spe.playback-control.skip-forward-15","Skip forward 15 seconds","Accessibility label for a button that skips to the next 15 sec of a track"),condensedAll:!0})}},96463:e=>{e.exports={wrapper:"PlaybackError_wrapper__ZrFwZ"}}}]);